<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Confirmation - Tech2etc Ecommerce</title>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
    <link rel="stylesheet" href="css/style.css">
    <style>
        .success-container {
            max-width: 600px;
            margin: 60px auto;
            padding: 40px;
            text-align: center;
            background: #f8f9fa;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .success-icon {
            font-size: 80px;
            color: #088178;
            margin-bottom: 20px;
            animation: scaleIn 0.6s ease-out;
        }

        .success-container h1 {
            color: #088178;
            margin-bottom: 10px;
            font-size: 32px;
        }

        .success-container p {
            font-size: 16px;
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .order-details {
            background: white;
            padding: 30px;
            border-radius: 8px;
            margin: 30px 0;
            text-align: left;
        }

        .order-details h3 {
            color: #088178;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-weight: 600;
            color: #333;
        }

        .detail-value {
            color: #666;
        }

        .order-items {
            margin-top: 20px;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 14px;
            border-bottom: 1px solid #eee;
        }

        .order-item:last-child {
            border-bottom: none;
        }

        .actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .actions a,
        .actions button {
            padding: 12px 30px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
            border: none;
            font-size: 14px;
            transition: all 0.3s;
        }

        .btn-primary {
            background-color: #088178;
            color: white;
        }

        .btn-primary:hover {
            background-color: #066a63;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: #f0f0f0;
            color: #333;
            border: 2px solid #088178;
        }

        .btn-secondary:hover {
            background-color: #088178;
            color: white;
        }

        .print-btn {
            background-color: #f0f0f0;
            color: #333;
        }

        .print-btn:hover {
            background-color: #e0e0e0;
        }

        @keyframes scaleIn {
            from {
                transform: scale(0);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .email-note {
            background: #e8f5e9;
            border-left: 4px solid #088178;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
            font-size: 14px;
            color: #2e7d32;
        }

        @media (max-width: 768px) {
            .success-container {
                margin: 30px 15px;
                padding: 25px;
            }

            .success-icon {
                font-size: 60px;
            }

            .success-container h1 {
                font-size: 24px;
            }

            .actions {
                flex-direction: column;
            }

            .actions a,
            .actions button {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <section id="header">
        <a href="index.html"><img src="img/logo.png" class="logo" alt=""></a>

        <div>
            <ul id="navbar">
                <li><a href="index.html">Home</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li id="lg-bag"><a href="cart.html"><i class="fas fa-shopping-bag"></i><span class="cart-count" id="cart-count">0</span></a></li>
                <a href="#" id="close"><i class="fas fa-times"></i></a>
            </ul>
        </div>
        <div id="mobile">
            <a href="cart.html"><i class="fas fa-shopping-bag"></i><span class="cart-count" id="cart-count-mobile">0</span></a>
            <i id="bar" class="fas fa-bars"></i>
        </div>
    </section>

    <section class="success-container">
        <div class="success-icon">
            <i class="fas fa-check-circle"></i>
        </div>

        <h1>Order Confirmed!</h1>
        <p>Thank you for your purchase. Your order has been successfully placed and confirmed.</p>

        <div class="email-note">
            <i class="fas fa-envelope"></i> A confirmation email has been sent to <strong id="email-display">your email</strong>
        </div>

        <div class="order-details" id="order-details">
            <h3>Order Details</h3>
            <div class="detail-row">
                <span class="detail-label">Order ID:</span>
                <span class="detail-value" id="order-id">Loading...</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Order Date:</span>
                <span class="detail-value" id="order-date">Loading...</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Payment Method:</span>
                <span class="detail-value" id="payment-method">Loading...</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Status:</span>
                <span class="detail-value"><span style="background: #e8f5e9; color: #2e7d32; padding: 4px 8px; border-radius: 4px;">âœ“ Confirmed</span></span>
            </div>

            <h3 style="margin-top: 25px; margin-bottom: 15px;">Items Ordered</h3>
            <div class="order-items" id="order-items">
                <!-- Items will be loaded here -->
            </div>

            <div class="detail-row" style="margin-top: 20px; font-weight: 600; border-top: 2px solid #088178; padding-top: 15px;">
                <span class="detail-label">Total Amount:</span>
                <span class="detail-value" id="total-amount" style="color: #088178; font-size: 18px;">Loading...</span>
            </div>
        </div>

        <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
            <h3 style="color: #088178; margin-bottom: 15px;">Shipping Address</h3>
            <div id="shipping-address" style="text-align: left; color: #666; line-height: 1.8;">
                <!-- Address will be loaded here -->
            </div>
        </div>

        <div class="actions">
            <button class="btn-primary" onclick="window.print()" title="Print Order">
                <i class="fas fa-print"></i> Print Receipt
            </button>
            <a href="shop.html" class="btn-secondary">
                <i class="fas fa-shopping-bag"></i> Continue Shopping
            </a>
            <a href="index.html" class="btn-primary">
                <i class="fas fa-home"></i> Back to Home
            </a>
        </div>

        <div style="margin-top: 30px; padding: 20px; background: white; border-radius: 8px; border-left: 4px solid #ffc107;">
            <h4 style="color: #f57c00; margin-bottom: 10px;">What's Next?</h4>
            <p style="font-size: 14px; color: #666; margin: 0;">
                Your order is being processed. You'll receive a shipping confirmation email with tracking information within 24 hours.
                If you have any questions, please contact our customer support team.
            </p>
        </div>
    </section>

    <!-- Footer -->
    <footer class="section-p1">
        <div class="col">
            <img class="logo" src="img/logo.png" alt="">
            <h4>Contact</h4>
            <p>
                <strong>Address: </strong>
                562 Wellington Road, Street 32, San Francisco
            </p>
            <p>
                <strong>Phone:</strong> +1 465 564 2233 / +1 465 564 2234
            </p>
            <p>
                <strong>Hours:</strong>
                10:00 - 18:00, Mon - Sun
            </p>
        </div>

        <div class="col">
            <h4>About</h4>
            <a href="#">About Us</a>
            <a href="#">Delivery Information</a>
            <a href="#">Privacy Policy</a>
            <a href="#">Terms & Conditions</a>
        </div>

        <div class="col">
            <h4>My Account</h4>
            <a href="#">Sign In</a>
            <a href="#">View Cart</a>
            <a href="#">My Wishlist</a>
            <a href="#">Track My Order</a>
            <a href="#">Help</a>
        </div>

        <div class="col install">
            <h4>Install App</h4>
            <p>From App Store or Google Play</p>
            <div class="row">
                <img src="img/pay/app.jpg" alt="">
                <img src="img/pay/play.jpg" alt="">
            </div>
            <p>Secured Payment Gateways</p>
            <img src="img/pay/pay.png" alt="">
        </div>

        <div class="copyright">
            <p>@ 2024, Tech2etc - HTML CSS Ecommerce Template</p>
        </div>
    </footer>

    <script src="js/cart.js"></script>
    <script src="js/script.js"></script>
    <script>
        // Get order ID from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const orderId = urlParams.get('orderId');
        const email = urlParams.get('email');

        document.addEventListener('DOMContentLoaded', async () => {
            // Display email
            if (email) {
                document.getElementById('email-display').textContent = email;
            }

            // Fetch order details from backend
            if (orderId) {
                try {
                    const response = await fetch(`/api/orders/${orderId}`);
                    const order = await response.json();

                    if (order && order.id) {
                        // Display order ID
                        document.getElementById('order-id').textContent = order.id;

                        // Display order date
                        const orderDate = new Date(order.timestamp);
                        document.getElementById('order-date').textContent = orderDate.toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                        });

                        // Display payment method
                        const paymentMethods = {
                            'credit-card': 'Credit/Debit Card',
                            'paypal': 'PayPal',
                            'transfer': 'Bank Transfer'
                        };
                        document.getElementById('payment-method').textContent = paymentMethods[order.payment] || order.payment;

                        // Display order items
                        const itemsHtml = order.items.map(item => `
                            <div class="order-item">
                                <span>${item.name} x ${item.quantity}</span>
                                <span>$${(item.price * item.quantity).toFixed(2)}</span>
                            </div>
                        `).join('');
                        document.getElementById('order-items').innerHTML = itemsHtml;

                        // Display total
                        document.getElementById('total-amount').textContent = typeof order.total === 'string' 
                            ? order.total 
                            : '$' + order.total.toFixed(2);

                        // Display shipping address
                        const shipping = order.shipping;
                        const addressHtml = `
                            ${order.customer.firstName} ${order.customer.lastName}<br>
                            ${shipping.address}<br>
                            ${shipping.city}, ${shipping.state} ${shipping.zip}<br>
                            ${shipping.country}<br>
                            <strong style="margin-top: 10px; display: block;">Phone:</strong> ${order.customer.phone}<br>
                            <strong>Email:</strong> ${order.customer.email}
                        `;
                        document.getElementById('shipping-address').innerHTML = addressHtml;
                    }
                } catch (error) {
                    console.error('Error fetching order:', error);
                    // Still display basic info even if fetch fails
                    document.getElementById('order-id').textContent = orderId;
                    const now = new Date();
                    document.getElementById('order-date').textContent = now.toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                }
            }
        });
    </script>
</body>

</html>
